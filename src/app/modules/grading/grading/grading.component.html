<div class="d-flex justify-content-center">
  <nz-table
    #table
    [nzData]="grading"
    [nzScroll]="{ x: '400px', y: '420px' }"
    nzBordered
    nzShowSizeChanger
    nzTableLayout="fixed"
    [nzTitle]="content"
    class="box-shadow w-100"
    nzSize="small"
  >
    <thead>
    <tr>
      <th class="text-align-center" nzLeft nzWidth="100px">Play</th>
      <th
        *ngFor="let column of listOfColumns; let i = index"
        class="text-align-center"
        nzWidth="200px"
      >
        <div class="d-flex justify-content-center align-items-center flex-column">
          <span> {{ listOfColumns[i] }} </span>
          <span
            [class.darkGreen-pill-grading]="columnValue[column] >= 90 && columnValue[column] <= 100"
            [class.green-pill-grading]="columnValue[column] >= 80 && columnValue[column] < 90"
            [class.orange-pill-grading]="columnValue[column] >= 60 && columnValue[column] < 70"
            [class.grey-pill-grading]="isNeutral[column] && columnValue[column] === 0"
            [class.red-pill-grading]="columnValue[column] < 60"
            [class.yellow-pill-grading]="columnValue[column] >= 70 && columnValue[column] < 80"
            class="pill-grading"
          >
              <span [class.disabled]="isNeutral[column] && columnValue[column] === 0">
                {{
                isNeutral[column] && columnValue[column] === 0 ?
                  "-"
                  : columnValue[column].toFixed(1) + "%"
                }}
              </span>
            </span>
        </div>
      </th>
      <th class="text-align-center" nzRight nzWidth="150px">Actions</th>
    </tr>
    </thead>
    <tbody>
    <tr
      *ngFor="let data of table.data; let i = index"
      class="text-align-center"
    >
      <td nzLeft>
          <span style="font-size: 30px; font-weight: bold">
            {{ i + 1 }}
          </span>
      </td>
      <td *ngFor="let column of listOfColumns">
        <div class="d-flex justify-content-center">
            <span (click)="increment(column, i)" class="p-1"
            ><i
              [nzTwotoneColor]="grading[i][column] === 1 ? '#5bd703' : 'grey'"
              nz-icon
              nzTheme="twotone"
              nzType="plus-circle"
            ></i
            ></span>
          <span (click)="decrement(column, i)" class="p-1"
          ><i
            [nzTwotoneColor]="
                  grading[i][column] === -1 ? '#e10428' : 'grey'
                "
            nz-icon
            nzTheme="twotone"
            nzType="minus-circle"
          ></i
          ></span>
        </div>
      </td>
      <td nzRight>
        <div class="d-flex justify-content-center">
            <span
              (click)="clear(i)"
              [nzTooltipColor]="'blue'"
              [nzTooltipTitle]="'Clear'"
              class="p-2"
              nz-tooltip
            ><i
              [nzTwotoneColor]="'#f5d50a'"
              nz-icon
              nzTheme="twotone"
              nzType="close-circle"
            ></i
            ></span>
          <span
            (click)="removeRow(i)"
            [class.disabled]="grading.length < 2"
            [nzTooltipColor]="'blue'"
            [nzTooltipTitle]="'Delete Play'"
            class="p-2"
            nz-tooltip
          ><i
            [nzTwotoneColor]="'#c00206'"
            nz-icon
            nzTheme="twotone"
            nzType="delete"
          ></i
          ></span>
          <span
            (click)="addRow()"
            [class.disabled]="i < this.grading.length - 1"
            [nzTooltipColor]="'blue'"
            [nzTooltipTitle]="'Next Play'"
            class="p-2"
            nz-tooltip
          ><i nz-icon nzTheme="outline" nzType="arrow-right"></i
          ></span>
        </div>
      </td>
    </tr>
    </tbody>
  </nz-table>
</div>
<div class="p-3 d-flex justify-content-end" style="font-size: 15px">
  <div class="text-align-center">
    <span>Last modified date and time stamp: </span>
    <p style="font-weight: bold">{{today | date:'medium'}}</p>
  </div>
</div>
<!--<div class="p-2">-->
<!--  <h4 style="font-weight: bold">Evaluation Summary:</h4>-->
<!--  <textarea class="w-100 box-shadow" nz-input rows="7"></textarea>-->
<!--</div>-->
<div class="d-flex justify-content-center">
  <button (click)="showModal()" nz-button nzType="primary">Finish Grading</button>
</div>
<ng-template #content>
  <div class="d-flex justify-content-between align-items-center">
    <div></div>
    <div style="color: white;font-size: 20px">
      {{prospect.first_name}} {{prospect.last_name}}  •  {{position}}  •  {{prospect.classification}}
    </div>
    <div style="color: white;font-size: 20px">
      {{prospect.state}}  •  {{prospect.school}}
    </div>
    <div class="overall-pill text-align-center">
      <span class="p-1">Overall Grade</span>
      <span
        [class.darkGreen-pill-grading]="totalValue >= 90 && totalValue <= 100"
        [class.green-pill-grading]="totalValue >= 80 && totalValue < 90"
        [class.grey-pill-grading]="totalValue === 0"
        [class.orange-pill-grading]="totalValue >= 60 && totalValue < 70"
        [class.red-pill-grading]="totalValue < 60"
        [class.yellow-pill-grading]="totalValue >= 70 && totalValue < 80"
        class="pill-grading"
      >{{ totalValue.toFixed(1) }}%
      </span>
    </div>
  </div>
</ng-template>
<nz-modal
  (nzOnCancel)="handleCancel()"
  (nzOnOk)="handleOk()"
  [(nzVisible)]="isVisible"
  [nzOkLoading]="isOkLoading"
  nzTitle="Evaluation Summary(Optional)"
>
  <textarea *nzModalContent class="w-100 box-shadow" nz-input rows="7"></textarea>
</nz-modal>
